<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stock Performance Backtester</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="card bg-white p-8 rounded-lg shadow-md w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4 text-center">Stock Performance Backtester</h1>
    <label class="block mb-2">Stock Symbol</label>
    <input id="symbolInput" class="border w-full mb-4 p-2" placeholder="e.g., AAPL" />
    
    <label class="block mb-2">Purchase Date</label>
    <input id="dateInput" type="date" class="border w-full mb-4 p-2" />
    
    <label class="block mb-2">Investment Amount ($)</label>
    <input id="amountInput" type="number" class="border w-full mb-4 p-2" value="1000" />
    
    <button id="calculateBtn" class="bg-indigo-600 text-white p-2 rounded w-full hover:bg-indigo-700">
      Calculate Performance
    </button>
    
    <div id="results" class="mt-4 text-center"></div>
    <p class="text-xs text-center mt-4">Made with Gemini</p>
  </div>

  <script>
    const calculateBtn = document.getElementById('calculateBtn');
    const resultsDiv = document.getElementById('results');

    calculateBtn.addEventListener('click', async () => {
      const symbol = document.getElementById('symbolInput').value.toUpperCase();
      const date = document.getElementById('dateInput').value;
      const amount = parseFloat(document.getElementById('amountInput').value);

      if (!symbol || !date || !amount) {
        resultsDiv.textContent = "Please fill in all fields.";
        return;
      }

      try {
        resultsDiv.textContent = "Fetching data...";

        const apiKey = "YOUR_API_KEY_HERE"; // Replace with your real TwelveData API key

        const url = `https://api.twelvedata.com/time_series?symbol=${symbol}&interval=1day&start_date=${date}&apikey=${apiKey}`;
        const response = await fetch(url);
        const data = await response.json();

        if (!data || !data.values || data.values.length === 0) {
          resultsDiv.textContent = "No data returned. Check the symbol and date.";
          return;
        }

        const purchasePrice = parseFloat(data.values[data.values.length - 1].close);
        const latestPrice = parseFloat(data.values[0].close);

        const sharesBought = amount / purchasePrice;
        const currentValue = sharesBought * latestPrice;
        const returnPercent = ((currentValue - amount) / amount) * 100;

        resultsDiv.innerHTML = `
          <p>You bought at $${purchasePrice.toFixed(2)}</p>
          <p>Current price: $${latestPrice.toFixed(2)}</p>
          <p>Return: <strong>${returnPercent.toFixed(2)}%</strong></p>
          <p>Current Value: <strong>$${currentValue.toFixed(2)}</strong></p>
        `;
      } catch (err) {
        resultsDiv.textContent = "Error fetching data.";
      }
    });
  </script>
</body>
</html>
